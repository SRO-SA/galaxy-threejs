(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.THREE_Text = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function getFontHeight(t){var e=fontHeightCache[t];if(!e){var n=document.getElementsByTagName("body")[0],i=document.createElement("div"),a=document.createTextNode("MÃ‰q");i.appendChild(a),i.setAttribute("style","font:"+t+";position:absolute;top:0;left:0"),n.appendChild(i),e=i.offsetHeight,fontHeightCache[t]=e,n.removeChild(i)}return e}var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),fontHeightCache={},CanvasText=function(){function t(){_classCallCheck(this,t),this.textWidth=null,this.textHeight=null,this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d")}return _createClass(t,[{key:"drawText",value:function(t,e){return this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.font=e.font,this.textWidth=Math.ceil(this.ctx.measureText(t).width),this.textHeight=getFontHeight(this.ctx.font),this.canvas.width=THREE.Math.nextPowerOfTwo(this.textWidth),this.canvas.height=THREE.Math.nextPowerOfTwo(this.textHeight),this.ctx.font=e.font,this.ctx.fillStyle=e.fillStyle,this.ctx.textAlign="left",this.ctx.textBaseline="top",this.ctx.fillText(t,0,0),this.canvas}},{key:"width",get:function(){return this.canvas.width}},{key:"height",get:function(){return this.canvas.height}}]),t}();module.exports=CanvasText;

},{}],2:[function(require,module,exports){
"use strict";function _typeof(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var _createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),textAlign=require("./textAlign"),CanvasText=require("./CanvasText"),SpriteText2D=function(t){function e(){var t=arguments.length<=0||void 0===arguments[0]?"":arguments[0],i=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];_classCallCheck(this,e);var n=_possibleConstructorReturn(this,Object.getPrototypeOf(e).call(this));return n._font=i.font||"30px Arial",n._fillStyle=i.fillStyle||"#FFFFFF",n.canvas=new CanvasText,n.align=i.align||textAlign.center,n.antialias=_typeof("undefined"===i.antialias)?!0:i.antialias,n.text=t,n}return _inherits(e,t),_createClass(e,[{key:"updateText",value:function(){this.canvas.drawText(this._text,{font:this._font,fillStyle:this._fillStyle}),this.cleanUp(),this.texture=new THREE.Texture(this.canvas.canvas),this.texture.needsUpdate=!0,this.applyAntiAlias(),this.material?this.material.map=this.texture:this.material=new THREE.SpriteMaterial({map:this.texture}),this.sprite||(this.sprite=new THREE.Sprite(this.material),this.geometry=this.sprite.geometry,this.add(this.sprite)),this.sprite.scale.set(this.canvas.width,this.canvas.height,1),this.sprite.position.x=this.canvas.width/2-this.canvas.textWidth/2+this.canvas.textWidth/2*this.align.x,this.sprite.position.y=-this.canvas.height/2+this.canvas.textHeight/2*this.align.y,window.sprite=this}},{key:"cleanUp",value:function(){this.texture&&this.texture.dispose()}},{key:"applyAntiAlias",value:function(){this.antialias===!1&&(this.texture.magFilter=THREE.NearestFilter,this.texture.minFilter=THREE.LinearMipMapLinearFilter)}},{key:"text",get:function(){return this._text},set:function(t){this._text!==t&&(this._text=t,this.updateText())}},{key:"font",get:function(){return this._font},set:function(t){this._font!==t&&(this._font=t,this.updateText())}},{key:"fillStyle",get:function(){return this._fillStyle},set:function(t){this._fillStyle!==t&&(this._fillStyle=t,this.updateText())}}]),e}(THREE.Object3D);module.exports=SpriteText2D;

},{"./CanvasText":1,"./textAlign":5}],3:[function(require,module,exports){
"use strict";function _typeof(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var _createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),textAlign=require("./textAlign"),CanvasText=require("./CanvasText"),Text2D=function(t){function e(){var t=arguments.length<=0||void 0===arguments[0]?"":arguments[0],i=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];_classCallCheck(this,e);var s=_possibleConstructorReturn(this,Object.getPrototypeOf(e).call(this));return s._font=i.font||"30px Arial",s._fillStyle=i.fillStyle||"#FFFFFF",s.canvas=new CanvasText,s.align=i.align||textAlign.center,s.side=i.side||THREE.DoubleSide,s.antialias=_typeof("undefined"===i.antialias)?!0:i.antialias,s.text=t,s}return _inherits(e,t),_createClass(e,[{key:"updateText",value:function(){this.cleanUp(),this.canvas.drawText(this._text,{font:this._font,fillStyle:this._fillStyle}),this.texture=new THREE.Texture(this.canvas.canvas),this.texture.needsUpdate=!0,this.applyAntiAlias(),this.material?this.material.map=this.texture:(this.material=new THREE.MeshBasicMaterial({map:this.texture,side:this.side}),this.material.transparent=!0),this.mesh||(this.mesh=new THREE.Mesh(new THREE.PlaneGeometry(this.canvas.width,this.canvas.height),this.material),this.geometry=this.mesh.geometry,this.add(this.mesh)),this.mesh.position.x=this.canvas.width/2-this.canvas.textWidth/2+this.canvas.textWidth/2*this.align.x,this.mesh.position.y=-this.canvas.height/2+this.canvas.textHeight/2*this.align.y,this.geometry.vertices[0].x=this.geometry.vertices[2].x=-this.canvas.width/2,this.geometry.vertices[1].x=this.geometry.vertices[3].x=this.canvas.width/2,this.geometry.vertices[0].y=this.geometry.vertices[1].y=this.canvas.height/2,this.geometry.vertices[2].y=this.geometry.vertices[3].y=-this.canvas.height/2,this.geometry.verticesNeedUpdate=!0}},{key:"cleanUp",value:function(){this.texture&&this.texture.dispose()}},{key:"applyAntiAlias",value:function(){this.antialias===!1&&(this.texture.magFilter=THREE.NearestFilter,this.texture.minFilter=THREE.LinearMipMapLinearFilter)}},{key:"text",get:function(){return this._text},set:function(t){this._text!==t&&(this._text=t,this.updateText())}},{key:"font",get:function(){return this._font},set:function(t){this._font!==t&&(this._font=t,this.updateText())}},{key:"fillStyle",get:function(){return this._fillStyle},set:function(t){this._fillStyle!==t&&(this._fillStyle=t,this.updateText())}}]),e}(THREE.Object3D);module.exports=Text2D;

},{"./CanvasText":1,"./textAlign":5}],4:[function(require,module,exports){
"use strict";module.exports.SpriteText2D=require("./SpriteText2D"),module.exports.Text2D=require("./Text2D"),module.exports.textAlign=require("./textAlign");

},{"./SpriteText2D":2,"./Text2D":3,"./textAlign":5}],5:[function(require,module,exports){
"use strict";module.exports={center:new THREE.Vector2(0,0),left:new THREE.Vector2(1,0),topLeft:new THREE.Vector2(1,-1),topRight:new THREE.Vector2(-1,-1),right:new THREE.Vector2(-1,0),bottomLeft:new THREE.Vector2(1,1),bottomRight:new THREE.Vector2(-1,1)};

},{}]},{},[4])(4)
});